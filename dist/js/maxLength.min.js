var jDom=function(e,t,n){e.extend=function(){return r(arguments)},e.trim=function(){for(var e=[],t=0;t<arguments.length;++t)e.push(a(arguments[t]));return e},e.getKeys=function(e){return o(e)},e.isArray=function(e){return"object"==typeof e?u(e):!1},e.on=function(e,t,n){return c(e,t,n),e},e.trigger=function(e,t){return f(e,t)},e.ready=function(e){var n=t.onload;t.onload="function"!=typeof t.onload?e:function(){n(),e()}},e.create=function(e){return s(e)},e.getByClassName=function(e,t){var r=[];return t="undefined"==typeof t?n:t,n.getElementsByClassName?r=t.getElementsByClassName(e):d(e,t)},e.getElementsByData=function(e,t,r,a){return t="undefined"==typeof t?null:t,r="undefined"==typeof r?n:r,a="undefined"==typeof a?"*":a,g(e,t,r,a)},e.getData=function(e){var t,n,r={};t=p(e),n=o(t);for(var a=0;a<n.length;++a)0==n[a].indexOf("data-")&&(r[n[a].substring(5,n[a].length)]=t[n[a]]);return r},e.addClass=function(e,t){var n;n=" "+i(e.className).join(" ")+" ",t=i(t);for(var r=0;r<t.length;++r)n.indexOf(" "+t[r]+" ")<0&&(n+=t[r]+" ");return e.className=a(n),e},e.removeClass=function(e,t){var n,r,a=0;t=i(t),n=i(e.className);for(var o=0;o<n.length;++o){r=0;for(var u=0;u<t.length;++u)if(n[o-a]==t[u]){n.splice(o-a,1),t.splice(u,1),++a;break}}return e.className=n.length?n.join(" "):"",e};var r,a,o,i,u;r=function(e){for(var t=e.length-1;t>0;--t)for(var n in e[t]){var r=!0;"undefined"!=typeof e[t-1][n]&&"object"==typeof e[t][n]&&"object"==typeof e[t-1][n]&&(u(e[t])||u(e[t-1])||(r=!1,e[t-1][n]=jDom.extend(e[t-1][n],e[t][n]))),r&&(e[t-1][n]=e[t][n])}return e.length?e[0]:{}},a=function(e){return e.replace(/^\s+|\s+$/g,"")},o=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},i=function(e){return a(e).replace(/[ ]+/," ").split(" ")},u=function(e){return Array.isArray?Array.isArray(e):v instanceof Array};var f,c;f=function(e,t){var r;return n.createEvent?(r=n.createEvent("HTMLEvents"),r.initEvent(t,!0,!0)):(r=n.createEventObject(),r.eventType=t),r.eventName=t,n.createEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r),e},c=function(e,t){return t.addEventListener?function(t,n,r){if(t&&!t.length||t===e)t.addEventListener(n,r,!1);else if(t&&t.length)for(var a=t.length,o=0;a>o;o++)c(t[o],n,r)}:t.attachEvent?function(t,n,r){if(t&&!t.length||t===e)t.attachEvent("on"+n,function(){return r.call(t,e.event)});else if(t.length)for(var a=t.length,o=0;a>o;o++)c(t[o],n,r)}:void 0}(this,n);var s,l;s=function(e){var t,r,a,o,i;if(e.contains=null==e.contains?[]:e.contains,e.attributes=null==e.attributes?{}:e.attributes,e.type=null==e.type?"div":e.type,t=l(e.type,e.attributes),r=e.contains,"string"==typeof r)t.appendChild(n.createTextNode(r));else for(a=0;a<r.length;++a)o=r[a],"object"==typeof o?(i=create(o),t.appendChild(i)):t.appendChild(n.createTextNode(o));return t},l=function(e,t){var r,a,o;if(r=n.createElement(e),"undefined"!=typeof t)for(a in t)o=t[a],r.setAttribute(a,o);return r};var d,g,p;return d=function(e,t){var n,r=[];n=t.getElementsByTagName("*"),e=i(e);for(var a=0;a<n.length;++a){var o,u=!0;o=" "+i(n[a].className).join(" ")+" ";for(var f=0;f<e.length;++f){var c=" "+e[f]+" ";if(-1==o.indexOf(c)){u=!1;break}}u&&r.push(n[a])}return r},g=function(e,t,n,r){var a,o=[];a=n.getElementsByTagName(r);for(var i=0;i<a.length;++i)a[i].getAttribute("data-"+e)&&(null!=t?a[i].getAttribute("data-"+e)==t&&o.push(a[i]):o.push(a[i]));return o},p=function(e){var t,n={};t=e.attributes;for(var r=0;r<t.length;++r){var a=t.item(r);n[a.nodeName]=a.nodeValue}return n},e}(jDom||{},window,document,console);
jDom=function(t){var e,n;return _oldCreate=t.create,t.create=function(t){return _oldCreate("string"==typeof t?n(t):t)},e=function(t){var e,n,r,i,a,s,l,c;if(e={text:/\${([^}]+)}/,attr:/\$\[(.*?)\]/},n=t.match(e.text),r=t.match(e.attr),n&&(t=t.replace(n[0],"")),r&&(t=t.replace(r[0],"")),i="div",t.length>0||r)a=t.indexOf("."),s=t.indexOf("#"),a>0&&s>0?(i=t.substring(0,Math.min(a,s)),t=t.replace(i,"")):0>a&&0>s?(i=t,t=t.replace(i,"")):0>a*s&&(i=t.substring(0,Math.max(a,s)),t=t.replace(i,"")),l=!1,c=!1,t.length>0&&(s=t.indexOf("#"),s>-1&&(l=t.substring(s+1,t.length),a=l.indexOf("."),a>-1&&(l=l.substring(0,a)),t=t.replace("#"+l,"")),t.length>0&&(c=t.split(".").join(" ").trim()));else if(n&&!r)return n[1];if(r=r?r[1]:{},"string"==typeof r){var o=r.split(",");r={};for(var f=0;f<o.length;++f){var p=o[f].split("=");r[p[0]]=p[1]}}return l&&(r.id=l),c&&(r["class"]=c),{type:i,attributes:r,contains:n?[n[1]]:[]}},n=function(t){var r,i,a,s;r=t.split("$>"),a=r[0].indexOf("$+"),s=r[0].indexOf("$*"),i=e(a>-1||s>-1?"div":r.splice(0,1)[0]);for(var l=i,c=0;c<r.length;++c){for(var o=r[c].split("$+"),f=0;f<o.length;++f)if(s=o[f].indexOf("$*"),s>-1){var p=parseInt(o[f].substring(s+2,o[f].length));o[f]=o[f].replace("$*"+p,"");for(var u=0;p>u;++u)l.contains.push(n(o[f]))}else l.contains.push(n(o[f]));l=i.contains[i.contains.length-1]}return i},t}(jDom||{},window,document,console);
var maxLength=function(t,e,r,n){var a,i,s,o,u,l={};u={string:"#{left} of #{limit} characters remaining.",warnclass:!1,warnthreshold:50},o=function(t){var e,r;return r=t.length,e=t.match(/(\r\n|\n|\r)/g),r+=null!=e?e.length:0,0>r?0:r},s=function(t,e){for(var r in e)t=t.replace("#{"+r+"}",e[r]);return t},i=function(){var t,e;if(t=this.getAttribute("id"),e=o(this.value),e>l[t].limit){var r=e-l[t].limit;e=l[t].limit,this.value=this.value.substring(0,this.value.length-r)}if(e!=l[t].current){l[t].current=e;for(var a={left:l[t].limit-l[t].current,limit:l[t].limit,current:l[t].current},i=0;i<l[t].counters.length;++i)l[t].counters[i].el.innerHTML=s(l[t].counters[i].opts.string,a),0!=l[t].counters[i].opts.warnclass&&(a.left<=l[t].counters[i].opts.warnthreshold?n.addClass(l[t].counters[i].el,l[t].counters[i].opts.warnclass):n.removeClass(l[t].counters[i].el,l[t].counters[i].opts.warnclass))}},a=function(){for(var t=jDom.getByClassName("maxLength"),r=0;r<t.length;++r){var a=n.extend({},u,n.getData(t[r]));if("undefined"==typeof l[a.textareaid]){var s,o;s=e.getElementById(a.textareaid),o=s.getAttribute(s.getAttribute("maxlength")?"maxlength":"max-length"),s.setAttribute("data-lengthmonitored","true"),l[a.textareaid]={input:s,limit:parseInt(o),current:-1,counters:[]},n.on(l[a.textareaid].input,"keyup",i),n.on(l[a.textareaid].input,"paste",i),n.on(l[a.textareaid].input,"cut",i)}l[a.textareaid].counters.push({opts:a,el:t[r]})}for(var c=jDom.getElementsByData("lengthmonitored","true",e,"textarea"),r=0;r<c.length;++r)jDom.trigger(c[r],"keyup")},n.ready(a)}(window,document,console,jDom);