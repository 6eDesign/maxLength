var maxLength=function(t,e,n,r){var i,a,s,u,o,l={};o={string:"#{left} of #{limit} characters remaining.",warnclass:!1,warnthreshold:50},u=function(t){var e,n;return n=t.length,e=t.match(/(\r\n|\n|\r)/g),n+=null!=e?e.length:0,0>n?0:n},s=function(t,e){for(var n in e)t=t.replace("#{"+n+"}",e[n]);return t},a=function(){var t,e;if(t=this.getAttribute("id"),e=u(this.value),e>l[t].limit){var n=e-l[t].limit;e=l[t].limit,this.value=this.value.substring(0,this.value.length-n)}if(e!=l[t].current){l[t].current=e;for(var i={left:l[t].limit-l[t].current,limit:l[t].limit,current:l[t].current},a=0;a<l[t].counters.length;++a)l[t].counters[a].el.innerHTML=s(l[t].counters[a].opts.string,i),0!=l[t].counters[a].opts.warnclass&&(i.left<=l[t].counters[a].opts.warnthreshold?r(l[t].counters[a].el).addClass(l[t].counters[a].opts.warnclass):r(l[t].counters[a].el).removeClass(l[t].counters[a].opts.warnclass))}},i=function(){r(".maxLength").each(function(){var t=r.extend({},o,r(this).data());if("undefined"==typeof l[t.textareaid]){var n=e.getElementById(t.textareaid);n.setAttribute("data-lengthmonitored","true"),l[t.textareaid]={input:n,limit:parseInt(n.getAttribute("maxlength")),current:-1,counters:[]},r(l[t.textareaid].input).on("keyup",a),r(l[t.textareaid].input).on("paste cut",function(){window.setTimeout(function(){r("textarea[data-lengthmonitored]").trigger("keyup")},0)})}l[t.textareaid].counters.push({opts:t,el:this})}),r("textarea[data-lengthmonitored]").trigger("keyup")},r(e).ready(i)}(window,document,console,jQuery);